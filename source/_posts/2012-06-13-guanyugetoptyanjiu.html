---
layout: post
title: 关于getopt研究
categories:
- python模块研究
tags:
- getopt
- gnu_getopt
published: true
comments: true
indexer: true
---
<p>前言：getopt是一个命令行选项解析模块</p>

<p><pre class="sh_python">
import getopt
print getopt.getopt(['-a', '-bval', '-c', 'val'], 'ab:c:')  #其中包含2个参数，前面的是具体想象和参数，后面是相应的选项，因为假如前面的"-bval"，但是怎么知道是'-b','-bv'还是'-bva'
print                                                       #那么后面指定了 b:
print getopt.getopt([ '--noarg', '--witharg', 'val', '--witharg2=another' ],'',
                    [ 'noarg', 'witharg=', 'witharg2=' ])  #长选项
</pre></p>

<p>执行结果：</p>

<p>dongwm@linux-dongwm:~&gt; python test.py
([('-a', ''), ('-b', 'val'), ('-c', 'val')], [])
([('--noarg', ''), ('--witharg', 'val'), ('--witharg2', 'another')], [])</p>

<p><pre class="sh_python">
import getopt
import sys</p>

<p>version = '1.0'
verbose = False
output_filename = 'default.out'</p>

<p>print 'ARGV      :', sys.argv[1:]</p>

<p>options, remainder = getopt.gnu_getopt(sys.argv[1:], 'o:v', ['output=',  #getopt.gnu_getopt命令行中的任何顺序混合选项和非选项参数
                                                             'verbose',
                                                             'version=',
                                                             ])
print 'OPTIONS   :', options</p>

<p>for opt, arg in options:
    if opt in ('-o', '--output'):
        output_filename = arg
    elif opt in ('-v', '--verbose'):
        verbose = True
    elif opt == '--version':
        version = arg</p>

<p>print 'VERSION   :', version
print 'VERBOSE   :', verbose
print 'OUTPUT    :', output_filename
print 'REMAINING :', remainder
</pre></p>

<p>一些执行操作：</p>

<p>dongwm@linux-dongwm:~&gt; python test.py -v not_an_option --output testfile
ARGV      : ['-v', 'not_an_option', '--output', 'testfile']
OPTIONS   : [('-v', ''), ('--output', 'testfile')]
VERSION   : 1.0
VERBOSE   : True
OUTPUT    : testfile
REMAINING : ['not_an_option']
dongwm@linux-dongwm:~&gt; python test.py -v -- --output testfile
ARGV      : ['-v', '--', '--output', 'testfile']
OPTIONS   : [('-v', '')]
VERSION   : 1.0
VERBOSE   : True
OUTPUT    : default.out
REMAINING : ['--output', 'testfile']</p>
