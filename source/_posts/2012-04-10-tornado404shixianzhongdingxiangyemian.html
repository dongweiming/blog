---
layout: post
title: tornado 404实现重定向页面
categories:
- tornado
tags:
- tornado404
published: true
comments: true
indexer: true
---
<p>前言：不喜欢默认的404报错：404:Not Found，本来我可以在我程序里面对RequestHandler重定义，但是需要修改的比较多，因为我的服务器上面只跑我这一个程序，那么我直接去修改源码（/usr/local/lib/python2.6/site-packages/tornado-2.2-py2.6.egg/tornado）的ErrorHandler类（个人方法仅供参考，要是有更好的方法，欢迎留言<pre class="sh_python">
class ErrorHandler(RequestHandler):  #大约1413行  这里主要是‘文件url的404’
    """Generates an error response with status_code for all requests."""
    def initialize(self, status_code):
        self.set_status(status_code)</p>

<p>    def prepare(self):
#        raise HTTPError(self._status_code)   注释掉了这句
        self.render("error.html")   改成重定向到一个页面</p>

<p> if not os.path.exists(abspath):   #大约1490行 这里主要是‘文件的404’
            #raise HTTPError(404)
            self.render("error.html")
            return -1</p>

<p> </pre>
error.html内容  #这个文件放在tornado模块的路径下
<pre class="sh_html4strict">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /&gt;
&lt;title&gt;dongwm.com 404报错页面&lt;/title&gt;
&lt;meta name="robots" content="noindex, nofollow" /&gt;
&lt;link href="{{static_url("dict.css")}}" rel="stylesheet" type="text/css" /&gt;	  #这里指定css放在网站程序的静态页面路径，而不是
&lt;/head&gt;                                                 #在tornado源码目录下，使用这样的路径是为了无论在网站那一级目录都能找到这个css，要不然在跟目录下可以，其他子目录下就没有了
	&lt;body&gt;                                           #或者直接指定url 比如 http://127.0.0.1/static/dict.css
		&lt;div id="header" class='headerPadding'&gt;
		&lt;/div&gt;
		&lt;div id="allframe" class="width950"&gt;
			&lt;div class="div404"&gt;
				&lt;div class="div404wording"&gt;
					&lt;a href="https://127.0.0.1"&gt;首页&lt;/a&gt;
					&lt;br&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div id="bottom"&gt;
			&lt;div class="width950" align="center"&gt;
				&lt;div class="copyright"&gt;
					Copyright © 2012 dongwm.com&lt;/br&gt;
					&lt;br /&gt;版权所有
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;
</pre>
&nbsp;</p>

<p>&nbsp;</p>
