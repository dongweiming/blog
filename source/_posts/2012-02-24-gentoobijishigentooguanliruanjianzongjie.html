---
layout: post
title: gentoo笔记（十）gentoo管理软件总结
categories:
- gentoo
tags:
- eclean
- eix
- elogv
- elogviewer
- equery
- euses
- genlop
- gentoolkit
- kelogviewer
- module-rebuild
- portage-utils
- qfile
- qlist
- revdep-rebuild
- ufed
published: true
comments: true
indexer: true
---
<p><strong>1 gentoolkit</strong></p>

<p>dongwm@localhost ~ $sudo sudo emerge gentoolkit
<strong> 1 revdep-rebuild 比如如果发现 /bin/ls 需要的 /lib/libacl.so.1 缺失，就会重新编译相关文件所在的包，以及所用到该文件的所在文件的包。</strong></p>

<p>dongwm@localhost ~ $sudo revdep-rebuild <span style="color: #000102;"><span style="font-family: 宋体;">修复一些被破坏的lib</span></span>
* Configuring search environment for revdep-rebuild</p>

<p>* Checking reverse dependencies
* Packages containing binaries and libraries broken by a package update
* will be emerged.</p>

<p>* Collecting system binaries and libraries
* Generated new 1_files.rr
* Collecting complete LD_LIBRARY_PATH
* Generated new 2_ldpath.rr
* Checking dynamic linking consistency
[ 100% ]
<strong> 2 equery</strong></p>

<p>equery b  xxx 查询文件是由那个软件包安装带来的
dongwm@localhost ~ $sudo  equery b  anjuta
* Searching for anjuta ...</p>

<p>dev-util/anjuta-2.32.1.1 (/usr/share/pixmaps/anjuta)
dev-util/anjuta-2.32.1.1 (/usr/bin/anjuta)
dev-util/anjuta-2.32.1.1 (/usr/share/anjuta)
dev-util/anjuta-2.32.1.1 (/usr/lib/anjuta)
equery d XXX，查询哪些软件包是依赖于pkg的
[ Searching for packages depending on vmware-modules... ] app-emulation/vmware-workstation-5.5.5.56455 (~app-emulation/vmware-modules-1.0.0.15)</p>

<p><strong> 3 eclean distfiles 只删除过期的包</strong>
<strong>2 module-rebuild</strong>
dongwm@localhost ~ $sudo emerge module-rebuild</p>

<p>重新编译外部内核模块</p>

<p>dongwm@localhost ~ $sudo module-rebuild rebuild</p>

<p>就可以重新编译所有内核的 外部 模块。比如 nvidia/vbox 这类软件用到的模块。当然，你要先装过 nvidia包和 vbox模块包，这样 portage 才有记录。
<strong>3 portage-utils</strong>
dongwm@localhost ~ $sudo portage-utils</p>

<p>dongwm@localhost ~ $sudo qfile anjuta 类似于 equery b
dev-util/anjuta (/usr/lib/anjuta)
dev-util/anjuta (/usr/share/anjuta)
dev-util/anjuta (/usr/share/pixmaps/anjuta)
dev-util/anjuta (/usr/bin/anjuta)</p>

<p>root@localhost ~ #equery depends  autogen 查看哪些包依赖于antogen
* These packages depend on autogen:
dev-util/anjuta-2.32.1.1 (sys-devel/autogen)
sys-devel/gcc-4.5.3-r1 (test ? &gt;=sys-devel/autogen-5.5.4)</p>

<p>root@localhost ~ #equery u anjuta 查看已安装包abc用了哪些USE
[ Legend : U - final flag setting for installation]
[        : I - package is installed with flag     ]
[ Colors : set, unset                             ]
* Found these USE flags for dev-util/anjuta-2.32.1.1:
U I
- - debug         : Enable extra debug codepaths, like asserts and extra
output. If you want to get meaningful backtraces see
http://www.gentoo.org/proj/en/qa/backtraces.xml
- - devhelp       : Enable devhelp integration
- - doc           : Adds extra documentation (API, Javadoc, etc). It is
recommended to enable per package instead of globally
- - glade         : Build glade plugin for anjuta
- - graphviz      : Adds support for the Graphviz library
- - introspection : Use dev-libs/gobject-introspection for introspection
+ + sourceview    : Build sourceview editing plugin for anjuta
- - subversion    : Enable subversion (version control system) support
- - test          : Workaround to pull in packages needed to run with
FEATURES=test. Portage-2.1.2 handles this internally, so
don't set it in make.conf/package.use anymore
- - vala          : Enable support for the Vala programming language</p>

<p>dongwm@localhost ~ $sudo qlist anjuta 列出软件包安装后都带来的文件列表</p>

<p><strong>4 genlop</strong>
dongwm@localhost ~ $sudo emerge genlop</p>

<p>genlop -t anjuta 列出安装anjuta的具体时间，时间长短等
dongwm@localhost ~ $sudo genlop -t anjuta
* dev-util/anjuta</p>

<p>Tue Feb 21 17:57:35 2012 &gt;&gt;&gt; dev-util/anjuta-2.32.1.1
merge time: 2 minutes and 54 seconds.</p>

<p>Wed Feb 22 10:55:30 2012 &gt;&gt;&gt; dev-util/anjuta-2.32.1.1
merge time: 4 minutes and 6 seconds.</p>

<p>Wed Feb 22 11:25:57 2012 &gt;&gt;&gt; dev-util/anjuta-2.32.1.1
merge time: 4 minutes and 5 seconds.</p>

<p>Fri Feb 24 13:22:43 2012 &gt;&gt;&gt; dev-util/anjuta-2.32.1.1
merge time: 3 minutes and 57 seconds.</p>

<p>root@localhost ~ #genlop -l|grep compiz 类似于rpm -qa 列出安装的软件包列表 这里grep过滤了一下
Tue Dec 27 22:44:27 2011 &gt;&gt;&gt; x11-libs/compiz-bcop-0.8.4
Tue Dec 27 22:49:00 2011 &gt;&gt;&gt; x11-wm/compiz-0.8.6-r3
Tue Dec 27 22:56:27 2011 &gt;&gt;&gt; x11-libs/libcompizconfig-0.8.4-r2
Tue Dec 27 22:57:00 2011 &gt;&gt;&gt; x11-plugins/compiz-plugins-main-0.8.6-r1
Tue Dec 27 22:57:08 2011 &gt;&gt;&gt; dev-python/compizconfig-python-0.8.4-r3
Tue Dec 27 22:57:13 2011 &gt;&gt;&gt; x11-libs/compizconfig-backend-gconf-0.8.4-r2
Tue Dec 27 22:57:44 2011 &gt;&gt;&gt; x11-plugins/compiz-plugins-extra-0.8.6-r1
Tue Dec 27 22:58:10 2011 &gt;&gt;&gt; x11-wm/compiz-fusion-0.8.6
<strong>5 eix</strong>
dongwm@localhost ~ $sudo emerge eix
软件包搜索：
dongwm@localhost ~ $sudo eix anjuta
[I] dev-util/anjuta
Available versions:  2.32.1.1 ~3.2.1 ~3.2.2 {debug devhelp doc glade graphviz +introspection packagekit +sourceview subversion test vala}
Installed versions:  2.32.1.1(13时21分50秒 2012年02月24日)(sourceview -debug -devhelp -doc -glade -graphviz -introspection -subversion -test -vala)
Homepage:            http://www.anjuta.org
Description:         A versatile IDE for GNOME</p>

<p>将本地软件列表与最新的portage树同步
dongwm@localhost ~ $sudo eix-sync</p>

<p>注：需要每次 emerge --sync 后运行 update-eix 才会更新索引。推荐使用 eix-sync 命令取代上面的2个命令
<strong>6 euses</strong></p>

<p>dongwm@localhost ~ $sudo emerge euses</p>

<p>查询哪个包用了YYY这个USE</p>

<p>euse -i YYY
<strong>7 ufed</strong></p>

<p>所有USE都可以在这里修改，不用手动修改 make.conf 了，很方便
dongwm@localhost ~ $sudo ufed
<strong>8 elogv</strong></p>

<p>emerge 大量软件的时候，很多提示的消息都一闪而过，现在给查看他们的方法。</p>

<p>dongwm@localhost ~ $sudo emerge elogv</p>

<p>emerge elogviewer # GTK
emerge kelogviewer # KDE</p>

<p>修改 /etc/make.conf</p>

<p>PORTAGE_ELOG_SYSTEM="save"
PORTAGE_ELOG_CLASSES="warn error info log qa"</p>

<p>你可以根据需求去掉一些信息，比如 qa(质量保证) 你不需要，就可以去掉。</p>
